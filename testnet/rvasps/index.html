<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Robot VASPs - TRISA Documentation</title><meta name=description content="Working with rVASPs for TestNet integration"><meta name=generator content="Hugo 0.83.1"><link href=https://trisa.dev//index.xml rel=alternate type=application/rss+xml><link rel=canonical href=https://trisa.dev/testnet/rvasps/><link rel=stylesheet href=https://trisa.dev/css/theme.min.css><script src=https://use.fontawesome.com/releases/v5.0.6/js/all.js></script><link rel=stylesheet href=https://trisa.dev/css/chroma.min.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script><script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script src=https://trisa.dev/js/bundle.js></script><style>:root{}</style><meta property="og:title" content="Robot VASPs"><meta property="og:description" content="Working with rVASPs for TestNet integration"><meta property="og:type" content="article"><meta property="og:url" content="https://trisa.dev/testnet/rvasps/"><meta property="article:section" content="testnet"><meta property="article:published_time" content="2021-06-14T12:50:23-05:00"><meta property="article:modified_time" content="2021-06-14T12:50:23-05:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Robot VASPs"><meta name=twitter:description content="Working with rVASPs for TestNet integration"><meta itemprop=name content="Robot VASPs"><meta itemprop=description content="Working with rVASPs for TestNet integration"><meta itemprop=datePublished content="2021-06-14T12:50:23-05:00"><meta itemprop=dateModified content="2021-06-14T12:50:23-05:00"><meta itemprop=wordCount content="968"><meta itemprop=keywords content></head><body><div class=container><header><h1>TRISA Documentation</h1><span class=version>Version v1beta1</span><a href=https://github.com/trisacrypto/trisa class=github><i class="fab fa-github"></i></a></header><div class=global-menu><nav><ul><li><a href=/>Documentation</a></li><li><a href=https://trisa.io/trisa-whitepaper/>White Paper</a></li><li><a href=https://vaspdirectory.net/>Directory</a></li><li><a href=https://vaspbot.net/>Demo</a></li></ul></nav></div><div class=content-container><main><h1>Robot VASPs</h1><p>The TestNet hosts three convenience &ldquo;robot VASPs&rdquo; (rVASPs) services to facilitate integration and testing with the TRISA TestNet. These services are as follows:</p><ul><li>Alice (<code>api.alice.vaspbot.net:443</code>): the primary integration rVASP used to trigger and receive TRISA messages.</li><li>Bob (<code>api.bob.vaspbot.net:443</code>): a demo rVASP to view exchanges with Alice.</li><li>Evil (<code>api.evil.vaspbot.net:443</code>): an &ldquo;evil&rdquo; rVASP that is not a TRISA TestNet member, used to test non-authenticated interactions.</li></ul><p>Note: the rVASPs are currently primarily configured for demos and work has begun on making them more robust for integration purposes; please check in with this documentation regularly for any changes. If you notice any bugs in the rVASP code or behavior, <a href=https://github.com/trisacrypto/testnet/issues>please open an issue</a>.</p><h2 id=getting-started-with-rvasps>Getting Started with rVASPs</h2><p>There are two ways that you can use the rVASPs to develop your TRISA service:</p><ol><li>You can trigger the rVASP to send a TRISA exchange message to your service.</li><li>You can send a TRISA message to the rVASP with a valid (or invalid) rVASP customer.</li></ol><p>The rVASPs have a built-in database of fake customers with fake wallet addresses. Their response to TRISA messages or to a triggered transfer requires the originator/beneficiary customer to be valid for the rVASP. E.g. if the customer wallet address is a valid Alice address and Alice is the beneficiary, the rVASP will respond with the customer&rsquo;s fake KYC data but if not, it will return an TRISA error code.</p><p>The following table of &ldquo;customers&rdquo; for Alice, Bob, and Evil can be used as a reference for interacting with each rVASP:</p><table><thead><tr><th>VASP</th><th>&ldquo;Crypto Wallet&rdquo;</th><th>Email</th></tr></thead><tbody><tr><td>api.bob.vaspbot.net</td><td>18nxAxBktHZDrMoJ3N2fk9imLX8xNnYbNh</td><td><a href=mailto:robert@bobvasp.co.uk>robert@bobvasp.co.uk</a></td></tr><tr><td>api.bob.vaspbot.net</td><td>1LgtLYkpaXhHDu1Ngh7x9fcBs5KuThbSzw</td><td><a href=mailto:george@bobvasp.co.uk>george@bobvasp.co.uk</a></td></tr><tr><td>api.bob.vaspbot.net</td><td>14WU745djqecaJ1gmtWQGeMCFim1W5MNp3</td><td><a href=mailto:larry@bobvasp.co.uk>larry@bobvasp.co.uk</a></td></tr><tr><td>api.bob.vaspbot.net</td><td><strong>1Hzej6a2VG7C8iCAD5DAdN72cZH5THSMt9</strong></td><td><a href=mailto:fred@bobvasp.co.uk>fred@bobvasp.co.uk</a></td></tr><tr><td>api.alice.vaspbot.net</td><td><strong>19nFejdNSUhzkAAdwAvP3wc53o8dL326QQ</strong></td><td><a href=mailto:sarah@alicevasp.us>sarah@alicevasp.us</a></td></tr><tr><td>api.alice.vaspbot.net</td><td>1ASkqdo1hvydosVRvRv2j6eNnWpWLHucMX</td><td><a href=mailto:mary@alicevasp.us>mary@alicevasp.us</a></td></tr><tr><td>api.alice.vaspbot.net</td><td>1MRCxvEpBoY8qajrmNTSrcfXSZ2wsrGeha</td><td><a href=mailto:alice@alicevasp.us>alice@alicevasp.us</a></td></tr><tr><td>api.alice.vaspbot.net</td><td>14HmBSwec8XrcWge9Zi1ZngNia64u3Wd2v</td><td><a href=mailto:jane@alicevasp.us>jane@alicevasp.us</a></td></tr><tr><td>api.evil.vaspbot.net</td><td><strong>1AsF1fMSaXPzz3dkBPyq81wrPQUKtT2tiz</strong></td><td><a href=mailto:gambler@evilvasp.gg>gambler@evilvasp.gg</a></td></tr><tr><td>api.evil.vaspbot.net</td><td>1PFTsUQrRqvmFkJunfuQbSC2k9p4RfxYLF</td><td><a href=mailto:voldemort@evilvasp.gg>voldemort@evilvasp.gg</a></td></tr><tr><td>api.evil.vaspbot.net</td><td>172n89jLjXKmFJni1vwV5EzxKRXuAAoxUz</td><td><a href=mailto:launderer@evilvasp.gg>launderer@evilvasp.gg</a></td></tr><tr><td>api.evil.vaspbot.net</td><td>182kF4mb5SW4KGEvBSbyXTpDWy8rK1Dpu</td><td><a href=mailto:badnews@evilvasp.gg>badnews@evilvasp.gg</a></td></tr></tbody></table><p>Note that all rVASP data was generated using a Faker tool to produce realistic/consistent test data and fixtures and is completely fictional. For example, the records for Alice VASP (a fake US company) are primarily in North America, etc.</p><p>If you&rsquo;re a Traveler customer, the bold addresses above have some attribution data associated with them, and they&rsquo;re a good candidate for Traveler-based rVASP interactions.</p><h3 id=preliminaries>Preliminaries</h3><p>This documentation assumes that you have a service that is running the latest <code>TRISANetwork</code> service and that it has been registered in the TRISA TestNet and correctly has TestNet certificates installed. See <a href=https://trisa.dev/integration/>TRISA Integration Overview</a> for more information. <strong>WARNING</strong>: the rVASPs do not participate in the TRISA production network, they will only respond to verified TRISA TestNet mTLS connections.</p><p>To interact with the rVASP API, you may either:</p><ol><li>Use the <code>rvasp</code> CLI tool</li><li>Use the rVASP protocol buffers and interact with the API directly</li></ol><p>To install the CLI tool, either download the <code>rvasp</code> executable for the appropriate architecture at the <a href=https://github.com/trisacrypto/testnet/releases>TestNet releases page</a>, clone <a href=https://github.com/trisacrypto/testnet/>the TestNet repository</a> and build the <code>cmd/rvasp</code> binary or install with <code>go get</code> as follows:</p><pre><code>$ go get github.com/trisacrypto/testnet/...
</code></pre><p>To use the <a href=https://github.com/trisacrypto/testnet/tree/main/proto/rvasp/v1>rVASP protocol buffers</a>, clone or download them from the TestNet repository then compile them to your preferred language using <code>protoc</code>.</p><h3 id=triggering-an-rvasp-to-send-a-message>Triggering an rVASP to send a message</h3><p>The rVASP admin endpoints are used to interact with the rVASP directly for development and integration purposes. Note that this endpoint is different than the TRISA endpoint, which was described above.</p><ul><li>Alice: <code>admin.alice.vaspbot.net:443</code></li><li>Bob: <code>admin.bob.vaspbot.net:443</code></li><li>Evil: <code>admin.evil.vaspbot.net:443</code></li></ul><p>To use the command line tool to trigger a message, run the following command:</p><pre><code>$ rvasp transfer -e admin.alice.vaspbot.net:443 \
        -a mary@alicevasp.us \
        -d 0.3 \
        -B trisa.example.com \
        -E
</code></pre><p>This message sends the Alice rVASP a message using the <code>-e</code> or <code>--endpoint</code> flag, and specifies that the originating account should be &ldquo;<a href=mailto:mary@alicevasp.us>mary@alicevasp.us</a>&rdquo; using the <code>-a</code> or <code>--account</code> flag. The originating account is used to determine what IVMS101 data to send to the beneficiary. The <code>-d</code> or <code>--amount</code> flag specifies the amount of &ldquo;AliceCoin&rdquo; to send.</p><p>The next two parts are critical. The <code>-E</code> or <code>--external-demo</code> flag tells the rVASP to trigger a request to your service rather than to perform a demo exchange with another rVASP. This flag is required! Finally, the <code>-B</code> or <code>--beneficiary-vasp</code> flag specifies where the rVASP will send the request. This field should be able to be looked up in the TRISA TestNet directory service; e.g. it should be your common name or the name of your VASP if it is searchable.</p><p>Note that you can set the <code>$RVASP_ADDR</code> and <code>$RVASP_CLIENT_ACCOUNT</code> environment variables to specify the <code>-e</code> and <code>-a</code> flags respectively.</p><p>To use the protocol buffers directly, use the <code>TRISAIntegration</code> service <code>Transfer</code> RPC with the following <code>TransferRequest</code>:</p><div class=highlight><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
    <span class=nt>&#34;account&#34;</span><span class=p>:</span> <span class=s2>&#34;mary@alicevasp.us&#34;</span><span class=p>,</span>
    <span class=nt>&#34;amount&#34;</span><span class=p>:</span> <span class=mf>0.3</span><span class=p>,</span>
    <span class=nt>&#34;beneficiary_vasp&#34;</span><span class=p>:</span> <span class=s2>&#34;trisa.example.com&#34;</span><span class=p>,</span>
    <span class=nt>&#34;check_beneficiary&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=nt>&#34;external_demo&#34;</span><span class=p>:</span> <span class=kc>true</span>
<span class=p>}</span>
</code></pre></div><p>These values have the same exact specification as the ones in the command line program.</p><h3 id=sending-a-trisa-message-to-an-rvasp>Sending a TRISA message to an rVASP</h3><p>The rVASP expects a <code>trisa.data.generic.v1beta1.Transaction</code> as the transaction payload and an <code>ivms101.IdentityPayload</code> as the identity payload. The identity payload beneficiary information does not need to be populated, the rVASP will respond populating the beneficiary, however the identity payload should not be null. It is recommended that you specify some fake identity data to take advantage of the rVASP parsing and validation commands.</p><p>Make sure that in your transaction payload you specify a beneficiary wallet that matches the rVASP beneficiaries from the table above; e.g. use:</p><div class=highlight><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
    <span class=nt>&#34;txid&#34;</span><span class=p>:</span> <span class=s2>&#34;1234&#34;</span><span class=p>,</span>
    <span class=nt>&#34;originator&#34;</span><span class=p>:</span> <span class=s2>&#34;anydatahereisfine&#34;</span><span class=p>,</span>
    <span class=nt>&#34;beneficiary&#34;</span><span class=p>:</span> <span class=s2>&#34;1MRCxvEpBoY8qajrmNTSrcfXSZ2wsrGeha&#34;</span><span class=p>,</span>
    <span class=nt>&#34;amount&#34;</span><span class=p>:</span> <span class=mf>0.3</span><span class=p>,</span>
    <span class=nt>&#34;network&#34;</span><span class=p>:</span> <span class=s2>&#34;TestNet&#34;</span><span class=p>,</span>
    <span class=nt>&#34;timestamp&#34;</span><span class=p>:</span> <span class=s2>&#34;2021-06-14T16:41:52-05:00&#34;</span>
<span class=p>}</span>
</code></pre></div><p>You may specify any <code>txid</code> or <code>originator</code> string and the <code>network</code> and <code>timestamp</code> fields are ignored.</p><p>Create a sealed envelope either using the directory service or direct key exchange to fetch the rVASP RSA public keys and using <code>AES256-GCM</code> and <code>HMAC-SHA256</code> as the envelope cryptography. Then use the <code>TRISANetwork</code> service <code>Transfer</code> RPC to send the sealed envelope to the rVASP.</p><p>TODO: Soon the <code>trisa</code> command line program will be available. We will specify how to use the CLI program to send a message here as soon as it is released.</p><div class=edit-meta>Last updated on June 14, 2021<br><a href=https://github.com/trisacrypto/trisa/edit/main/docs/content/testnet/rvasps.md class=edit-page><i class="fas fa-pen-square"></i> Edit on GitHub</a></div><nav class=pagination><a class="nav nav-prev" href=https://trisa.dev/testnet/ title=TestNet><i class="fas fa-arrow-left" aria-hidden=true></i>&nbsp;Prev - TestNet</a>
<a class="nav nav-next" href=https://trisa.dev/gds/ title="Directory Service">Next - Directory Service <i class="fas fa-arrow-right" aria-hidden=true></i></a></nav><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme by <a href=https://themes.gohugo.io/hugo-theme-techdoc/>TechDoc</a>. Designed by <a href=https://github.com/thingsym/hugo-theme-techdoc>Thingsym</a>.</p></footer></main><div class=sidebar><nav class=slide-menu><ul><li><a href=https://trisa.dev/>Home</a></li><li><a href=https://trisa.dev/integration/>Integration Overview</a></li><li class="parent has-sub-menu"><a href=https://trisa.dev/testnet/>TestNet<span class="mark opened">-</span></a><ul class=sub-menu><li class=active><a href=https://trisa.dev/testnet/rvasps/>Robot VASPs</a></li></ul></li><li class=has-sub-menu><a href=https://trisa.dev/gds/>Directory Service<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://trisa.dev/gds/registration/>Registration</a></li><li><a href=https://trisa.dev/gds/sectigo/>Sectigo</a></li></ul></li><li class=has-sub-menu><a href=https://trisa.dev/contributing/>Contributing<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://trisa.dev/contributing/license/>License</a></li></ul></li><li class=has-sub-menu><a href=https://trisa.dev/reference/>Reference<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://trisa.dev/reference/faq/>FAQ</a></li><li><a href=https://trisa.dev/reference/glossary/>Glossary</a></li></ul></li></ul></nav><div class=sidebar-footer></div></div></div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20><span class="fa-layers fa-fw"><i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i></span></a></div></body></html>