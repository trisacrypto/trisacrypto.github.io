<!doctype html><html lang=en dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.138.0"><meta name=generator content="Relearn 7.2.1"><meta name=description content="Guide to using the Envoy API"><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="API Guide :: TRISA Documentation"><meta name=twitter:description content="Guide to using the Envoy API"><meta property="og:url" content="https://trisa.dev/envoy/api/index.html"><meta property="og:site_name" content="TRISA Documentation"><meta property="og:title" content="API Guide :: TRISA Documentation"><meta property="og:description" content="Guide to using the Envoy API"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="TRISA Envoy"><meta property="article:published_time" content="2024-05-08T14:42:51-05:00"><meta property="article:modified_time" content="2024-05-08T14:42:51-05:00"><meta itemprop=name content="API Guide :: TRISA Documentation"><meta itemprop=description content="Guide to using the Envoy API"><meta itemprop=datePublished content="2024-05-08T14:42:51-05:00"><meta itemprop=dateModified content="2024-05-08T14:42:51-05:00"><meta itemprop=wordCount content="1287"><title>API Guide :: TRISA Documentation</title><link rel=icon href=/favicon.png type=image/png>
<link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/auto-complete.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/auto-complete.css rel=stylesheet></noscript><link href=/css/perfect-scrollbar.min.css rel=stylesheet><link href=/css/theme.min.css rel=stylesheet><link href=/css/format-html.min.css rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../..",window.relearn.absBaseUri="https://trisa.dev",window.relearn.min=`.min`,window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.themevariants=["blue"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}}))},window.relearn.markVariant=function(){var t=window.localStorage.getItem(window.relearn.absBaseUri+"/variant"),e=document.querySelector("#R-select-variant");e&&(e.value=t)},window.relearn.initVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link rel=stylesheet href=/css/syntax.css></head><body class="mobile-support html disableInlineCopyToClipboard" data-url=/envoy/api/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#authentication-and-authorization>Authentication and Authorization</a><ul><li><a href=#permissions>Permissions</a></li></ul></li><li><a href=#sending-travel-rule-messages>Sending Travel Rule Messages</a><ul><li><a href=#routing>Routing</a></li><li><a href=#originator-and-beneficiary-persons>Originator and Beneficiary Persons</a></li><li><a href=#transfer>Transfer</a></li></ul></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/index.html><span itemprop=name>TRISA Developer Documentation</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/envoy/index.html><span itemprop=name>TRISA Envoy</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>API Guide</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/envoy/configuration/index.html title="Configuration (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/envoy/webhook/index.html title="Webhook Guide (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable envoy" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=api-guide>API Guide</h1><details open class="box cstyle notices tip"><summary class=box-label><i class="fa-fw fas fa-rocket"></i>
API Credentials</summary><div class=box-content><p>In order to use the API you will have to generate an API Key Client ID and Secret either from the user interface, or by using the command line tool as described in <a href=/envoy/deploy/index.html#creating-api-keys>&ldquo;creating api keys&rdquo;</a>.</p></div></details><h2 id=authentication-and-authorization>Authentication and Authorization</h2><p>All API endpoints require authorization using <code>Bearer</code> tokens in the <code>Authorization</code> header. The <code>Bearer</code> token is a time-limited JWT token that is signed by the Envoy server. The JWT token contains the valid claims that the API key has: most importantly the <em>permissions</em> assigned to the API Key. If the endpoint requires a permission that the API key does not have then a 403 error is returned.</p><p>To obtain the JWT bearer token, you must first authenticate with the server using your client ID and secret with a <code>POST</code> request to <code>/v1/authenticate</code>.</p><div class="highlight wrap-code"><pre tabindex=0><code>POST /v1/authenticate HTTP/1.1
Host: [ENDPOINT]
Accept: application/json
Content-Type: application/json

{
    &#34;client_id&#34;: &#34;[CLIENT_ID]&#34;,
    &#34;client_secret&#34;: &#34;[CLIENT_SECRET]&#34;
}</code></pre></div><p>The response will contain a JWT <code>access_token</code> and <code>refresh_token</code>. The <code>access_token</code> should be used as the <code>Authorization: Bearer</code> token for all API requests:</p><div class="highlight wrap-code"><pre tabindex=0><code>GET /v1/counterparties HTTP/1.1
Host: [ENDPOINT]
Accept: application/json
Content-Type: application/json
Authorization: Bearer [ACCESS_TOKEN]</code></pre></div><p>By default the access token expires after 1 hour and the refresh token expires after 2 hours, becoming available 15 minutes before the access token expires (though these durations can all be configured).</p><p>To reauthenticate while the <code>refresh_token</code> is still valid, <code>POST</code> the <code>refresh_token</code> to the <code>/v1/reauthenticate</code> endpoint to obtain new access and refresh tokens without having to resupply the client ID and secret.</p><div class="highlight wrap-code"><pre tabindex=0><code>POST /v1/reauthenticate HTTP/1.1
Host: [ENDPOINT]
Accept: application/json
Content-Type: application/json

{
    &#34;refresh_token&#34;: &#34;[REFRESH_TOKEN]&#34;
}</code></pre></div><h3 id=permissions>Permissions</h3><p>The following table contains the permissions available to API keys:</p><table><thead><tr><th>Permission</th><th>Description</th></tr></thead><tbody><tr><td><code>users:manage</code></td><td>Can create, edit, and delete users</td></tr><tr><td><code>users:view</code></td><td>Can view users registered on the node</td></tr><tr><td><code>apikeys:manage</code></td><td>Can create apikeys and view associated secret</td></tr><tr><td><code>apikeys:view</code></td><td>Can view apikeys created on the node</td></tr><tr><td><code>apikeys:revoke</code></td><td>Can revoke apikeys and delete them</td></tr><tr><td><code>counterparties:manage</code></td><td>Can create, edit, and delete counterparties</td></tr><tr><td><code>counterparties:view</code></td><td>Can view counterparty details</td></tr><tr><td><code>accounts:manage</code></td><td>Can create, edit, and delete accounts and crypto addresses</td></tr><tr><td><code>accounts:view</code></td><td>Can view accounts and crypto addresses</td></tr><tr><td><code>travelrule:manage</code></td><td>Can create, accept, reject, and archive transactions and send secure envelopes</td></tr><tr><td><code>travelrule:delete</code></td><td>Can delete transactions and associated secure envelopes</td></tr><tr><td><code>travelrule:view</code></td><td>Can view travel rule transactions and secure envelopes</td></tr><tr><td><code>config:manage</code></td><td>Can manage the configuration of the node</td></tr><tr><td><code>config:view</code></td><td>Can view the configuration of the node</td></tr><tr><td><code>pki:manage</code></td><td>Can create and edit certificates and sealing keys</td></tr><tr><td><code>pki:delete</code></td><td>Can delete certificates and sealing keys</td></tr><tr><td><code>pki:view</code></td><td>Can view certificates and sealing keys</td></tr></tbody></table><h2 id=sending-travel-rule-messages>Sending Travel Rule Messages</h2><p>The basic method to create and send travel rule messages to counterparties is to use the &ldquo;preparing transactions&rdquo; workflow described by the API documentation. Using this workflow you will:</p><ol><li>Create and validate an IVMS101 payload using the <code>/v1/transactions/prepare</code> endpoint</li><li>Create the transaction and send the message using the <code>/v1/transactions/send-prepared</code> endpoint.</li></ol><p>This two step workflow performs a lot of work on your behalf, saving the multiple required calls you would need to different REST objects and endpoints to perform the same activities, namely:</p><ul><li>Lookup or create a counterparty record</li><li>Create IVMS101 Legal Person records for the counterparty and your VASP</li><li>Create a Transaction record for the transfer</li><li>Send an outgoing message, get a response, & create secure envelopes for the messages.</li></ul><p>The <code>/v1/transactions/prepare</code> endpoint takes a simplified data representation and requires only the following data:</p><ol><li>Routing information to identify the counterparty</li><li>Identity information about the originator and beneficiary accounts</li><li>Transfer information to identify the transaction on the chain.</li></ol><p>The response that is returned from this endpoint includes:</p><ol><li>The Routing information, possibly updated</li><li>A TRISA identity payload including Originator and Beneficiary VASP records</li><li>A Transaction payload</li></ol><p>If there are no validation errors, the response can then be directly posted to the <code>/v1/transactoins/send-prepared</code> endpoint in order to create and send the transfer.</p><h3 id=routing>Routing</h3><p>The routing information for the prepare and send-prepared endpoints determines the counterparty to send the travel rule message to, as well as the protocol to use. Different protocols require different counterparty identification mechanisms.</p><details open class="box cstyle notices warning"><summary class=box-label><i class="fa-fw fas fa-gear"></i>
Backwards Compatibility</summary><div class=box-content><p>Note that the new v1.0.0 release of Envoy has a backwards incompatible change with the v0.30.1 prepare/send-prepared endpoints. Previously only a travel address was used for counterparty identification, but now a more complex routing object is used.</p></div></details><p>A routing object has the following fields:</p><ul><li><code>protocol</code>: identify the protocol used to send the message to and identify the counterparty</li><li><code>counterparty_id</code>: the ULID of the counterparty in the database (TRISA)</li><li><code>travel_address</code>: the OpenVASP Travel Address of the counterparty (TRISA, TRP)</li><li><code>email</code>: The email address of the counterparty (Sunrise)</li><li><code>counterparty</code>: The legal name of the counterparty (Sunrise)</li></ul><p>The following protocols are currently supported by Envoy:</p><ol><li>TRISA: send a secure envelope to a counterparty identified by ID or travel address.</li><li>TRP: send a TRP request to a counterparty identified by a travel address.</li><li>Sunrise: send an email with a secure link to a counterparty identified by email address and the name of the counterparty.</li></ol><p>Examples of prepare messages for each protocol are below:</p><h4 id=trisa>TRISA</h4><p>To send a prepare/send-prepared message using the TRISA protocol you can identify the counterparty by ID:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;routing&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;protocol&#34;</span><span class=p>:</span> <span class=s2>&#34;trisa&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;counterparty_id&#34;</span><span class=p>:</span> <span class=s2>&#34;01JPMJG3ZFSX753ZAKRWRZPWVC&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;originator&#34;</span><span class=p>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;beneficiary&#34;</span><span class=p>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;transfer&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Or you can use the Travel Address for the TRISA node:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;routing&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;protocol&#34;</span><span class=p>:</span> <span class=s2>&#34;trisa&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;travel_address&#34;</span><span class=p>:</span> <span class=s2>&#34;taLg4sBFp3cWhB9wN7qsiUF8pxo7JXtVShYkv5ix1wG2kX5y4pRiJ3TRHmeD8H67TLLm5wHyDktVw1onfDeQfESumf91mjRTMbi&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;originator&#34;</span><span class=p>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;beneficiary&#34;</span><span class=p>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;transfer&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Note that you must specify either <code>counterparty_id</code> or <code>travel_address</code>, not both, and <code>email</code> and <code>counterparty</code> should not be specified.</p><h4 id=sunrise>Sunrise</h4><p>To send a sunrise message, create a counterparty with the email address of the compliance officer (using the full name, bracket email address format) and the name of the counterparty to send the message to:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;routing&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;protocol&#34;</span><span class=p>:</span> <span class=s2>&#34;sunrise&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;counterparty&#34;</span><span class=p>:</span> <span class=s2>&#34;AliceCoin, LLC&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;email&#34;</span><span class=p>:</span> <span class=s2>&#34;Jane Smith &lt;jane@alicevasp.com&gt;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;originator&#34;</span><span class=p>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;beneficiary&#34;</span><span class=p>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;transfer&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>If the counterparty already exists in your Envoy database, it&rsquo;s easier to use only the email address so that the counterparty can be looked up successfully:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;routing&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;protocol&#34;</span><span class=p>:</span> <span class=s2>&#34;sunrise&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;email&#34;</span><span class=p>:</span> <span class=s2>&#34;jane@alicevasp.com&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;originator&#34;</span><span class=p>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;beneficiary&#34;</span><span class=p>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;transfer&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><h4 id=trp>TRP</h4><p>To send a TRP message, the travel address is required:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;routing&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;protocol&#34;</span><span class=p>:</span> <span class=s2>&#34;trp&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;travel_address&#34;</span><span class=p>:</span> <span class=s2>&#34;taLg4sBFp3cWhB9wN7qsiUF8pxo7JXtVShYkv5ix1wG2kX5y4pRiJ3TRHmeD8H67TLLm5wHyDktVw1onfDeQfESumf91mjRTMbi&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;originator&#34;</span><span class=p>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;beneficiary&#34;</span><span class=p>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;transfer&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><h3 id=originator-and-beneficiary-persons>Originator and Beneficiary Persons</h3><p>The <code>originator</code> and <code>beneficiary</code> fields are <code>Person</code> objects that are simplifications of the IVMS101 Natural Person object and are used to create IVMS101 natural persons for the identity payload. They both have the same exact fields.</p><p><strong>NOTE</strong>: If either the originator or beneficiary account holder is a business (e.g. a Legal Person), you&rsquo;ll have to use raw IVMS101 with the <code>/v1/send-prepared</code> endpoint.</p><p>An example of a JSON person with all fields is as follows:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;crypto_address&#34;</span><span class=p>:</span> <span class=s2>&#34;mvr5YZBdAuV8sgexCHL4CRkbCvTV7odT1i&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;forename&#34;</span><span class=p>:</span> <span class=s2>&#34;James&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;surname&#34;</span><span class=p>:</span> <span class=s2>&#34;Bond&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;country_of_residence&#34;</span><span class=p>:</span> <span class=s2>&#34;GB&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;customer_id&#34;</span><span class=p>:</span> <span class=s2>&#34;674907513&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;identification&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;type_code&#34;</span><span class=p>:</span> <span class=s2>&#34;DRLC&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;number&#34;</span><span class=p>:</span> <span class=s2>&#34;BOND9211110JA9OB&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;country&#34;</span><span class=p>:</span> <span class=s2>&#34;GB&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;dob&#34;</span><span class=p>:</span> <span class=s2>&#34;1920-11-11&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;birth_place&#34;</span><span class=p>:</span> <span class=s2>&#34;Wattenscheid, Germany&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;addresses&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;address_type&#34;</span><span class=p>:</span> <span class=s2>&#34;HOME&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;address_lines&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>          <span class=s2>&#34;1 High Street&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=s2>&#34;Apt. 007&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=s2>&#34;London SE1 2QH&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;country&#34;</span><span class=p>:</span> <span class=s2>&#34;GB&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span></span></span></code></pre></div><p>Not all of these fields are required for all jurisdictions! We recommend that you send the minimum amount of PII as required by your jursidiction and use the review/repair workflow to request any additional data required for compliance.</p><h3 id=transfer>Transfer</h3><p>The transfer object is used to identify the transaction on the blockchain. A fully populated JSON representation is as follows:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=s2>&#34;transfer&#34;</span><span class=err>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;amount&#34;</span><span class=p>:</span> <span class=mf>0.0007</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;network&#34;</span><span class=p>:</span> <span class=s2>&#34;BTC&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;asset_type&#34;</span><span class=p>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;transaction_id&#34;</span><span class=p>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;tag&#34;</span><span class=p>:</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>The <code>network</code> field should be either the SLIP-0044 short code for the virtual asset or the DTI (Digital Token Identifier) to allow the counterparty to identify the blockchain network being used. The <code>asset_type</code> and <code>tag</code> (sometimes referred to as &ldquo;memo&rdquo;) fields are chain-specific fields and are not required in all cases. The <code>transaction_id</code> is the hash of the block or ledger record and is only available once the transaction on the chain has been completed.</p><footer class=footline></footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><a id=logo href=/ style="color:#3d414d;font-family:novacento sans wide,helvetica,tahoma,geneva,arial,sans-serif;font-size:30px;font-weight:700;margin-top:-2px"><svg version="1.0" width="110pt" height="100pt" viewBox="0 0 1116 1022"><g transform="translate(0.000000,1022.000000) scale(0.100000,-0.100000)" fill="#fff" stroke="none"><path d="M5175 8694c-372-40-646-124-955-289-93-50-98-53-185-109-79-52-172-124-270-211l-80-71-45 8c-119 24-255-17-338-1e2-138-139-147-353-21-513 96-123 314-160 462-81 67 36 141 120 166 187 29 76 29 214 1 280l-20 46 53 50c28 27 93 80 142 118 319 239 7e2 388 1106 431 123 13 410 13 524 0 455-52 915-256 1233-547l53-48-20-60c-10-33-22-71-25-85-4-21-24-33-121-74-514-217-929-608-1212-1141l-53-1e2v457 456l48 27c108 62 171 149 192 264 30 169-51 336-199 408-51 25-66 28-166 28-106 0-112-1-171-33-75-41-123-89-160-162-27-51-29-63-29-170s2-119 28-168c33-63 101-131 163-163l44-24v-841-841l-40-18c-52-24-145-121-172-182-17-38-21-68-22-148-1-88 2-107 26-157 83-177 275-258 466-196 58 18 77 31 138 92s73 79 87 132c33 119 16 254-44 341-29 42-94 1e2-137 122-12 7-20 16-17 21 3 4 12 46 21 92 24 130 72 290 126 428 43 108 204 408 250 465 4 6 34 44 65 85 242 316 561 565 903 704l64 26 41-39c22-22 67-53 1e2-68 53-25 71-28 160-28 91 0 106 3 158 30 136 68 213 202 205 353-8 147-77 257-2e2 317-61 31-197 45-259 27-35-9-39-8-80 30-24 23-60 55-79 73-29 26-92 75-185 143-5 4-30 20-55 36s-58 38-73 48c-42 29-250 134-305 154-26 10-51 20-57 24-30 20-248 87-363 111-303 65-595 83-867 53z"/><path d="M5901 4195c-67-15-98-31-144-74-84-77-97-212-31-314 45-69 1e2-95 357-168 114-32 150-82 110-150-36-61-165-89-246-55-43 17-84 67-97 117l-11 40-92-7c-51-3-94-8-96-10-8-7 20-111 40-150 66-124 204-185 388-171 213 17 321 115 321 290 0 165-78 239-320 302-175 45-220 73-206 131 20 79 210 94 271 22 14-17 29-44 32-60 5-27 9-29 36-24 16 3 61 6 99 6h70l-7 43c-4 23-14 59-22 80-21 53-104 123-166 142-75 23-209 28-286 10z"/><path d="M3570 4110v-80h135 135v-380-380h1e2 1e2v380 380h135 135v80 80h-370-370v-80z"/><path d="M4420 3731v-461h95 95v190 190h39c107 0 124-14 269-228l103-152h115c62 0 114 2 114 5s-41 69-90 148c-61 95-110 161-151 2e2-47 44-57 57-42 57 34 0 96 30 131 63 126 120 98 339-53 416-49 26-51 26-337 29l-288 4v-461zm5e2 281c25-12 39-28 49-58 13-37 12-44-5-80-10-21-30-44-44-50-14-7-89-15-167-19l-143-7v116 116h138c110 0 144-3 172-18z"/><path d="M5340 3730v-460h95 95v460 460h-95-95v-460z"/><path d="M6792 4138c-11-29-90-233-176-452-86-220-156-404-156-408 0-5 46-7 102-6l103 3 36 1e2 36 1e2h179 178l39-102 40-103h103c57 0 104 3 104 8 0 4-81 211-181 460l-181 452h-103-104l-19-52zm176-328c28-74 53-143 57-152 7-17-2-18-109-18-64 0-116 1-116 3 0 14 112 309 115 305 2-2 26-64 53-138z"/><path d="M9e2 2194v-466l243 4c275 5 316 14 399 88 174 153 186 548 22 730-82 90-163 109-466 110H9e2v-466zm455 277c51-23 91-69 107-124 19-65 16-261-5-323-19-55-56-97-1e2-113-16-6-80-11-143-11h-114v295 295h108c82 0 116-5 147-19z"/><path d="M8290 2575v-85h90 90v85 85h-90-90v-85z"/><path d="M6818 2587l-88-52v-67-68h-40-40v-70-70h39 38l5-212c6-252 13-278 80-308 48-22 140-26 201-9 34 9 37 13 37 47 0 72-11 113-29 108-55-16-69-17-85-1-14 14-16 43-16 196v179h60 60v70 70h-60-60v120c0 66-3 120-7 119-5 0-47-24-95-52z"/><path d="M7958 2587l-88-51v-68-68h-40-40v-70-70h39 39l4-217c3-245 9-268 78-304 40-22 141-26 203-8l39 10-7 72c-4 40-9 74-10 75-2 2-19-1-39-8-26-8-41-8-56 0-19 10-20 19-20 195v185h60 60v70 70h-60-60v120c0 66-3 120-7 120-5-1-47-24-95-53z"/><path d="M2013 2402c-151-54-227-166-227-332 1-206 121-337 320-348 157-9 267 51 334 182 33 64 35 74 35 165-1 82-4 104-26 151-37 79-81 125-156 162-83 41-198 49-280 20zm196-160c61-45 90-128 76-215-10-56-28-89-65-121-61-51-132-47-191 12-91 91-65 289 45 338 39 18 101 11 135-14z"/><path d="M2773 2402c-89-32-143-84-180-173-14-34-18-71-18-164 0-111 2-124 28-177 55-111 153-168 291-168 137 0 220 45 273 148 49 95 48 97-56 114l-89 14-11-36c-15-51-51-81-103-87-94-9-148 64-148 202 0 134 44 195 139 195 46 0 95-35 105-75 4-14 12-25 19-24 27 1 158 27 163 32 10 10-15 73-46 115-44 61-122 95-229 99-65 3-99-1-138-15z"/><path d="M4375 2408c-16-6-48-24-70-40l-40-29-3 31-3 30h-90-89v-335-335h95 95v203c0 111 4 219 9 240 24 102 152 141 191 59 9-18 14-103 18-264l5-238h87 88l4 223c3 189 6 227 21 254 38 70 120 90 163 39 24-27 24-29 24-272v-244h95 95v251c0 287-6 325-60 379-83 83-254 77-338-13l-23-24-37 37c-55 55-158 76-237 48z"/><path d="M5389 2404c-59-18-133-83-164-144s-48-168-39-245c14-127 67-215 158-263 46-25 61-27 161-27s115 2 161 27c70 37 144 128 131 162-3 7-42 18-88 25-78 12-85 12-94-5-26-47-63-74-102-74-68 0-118 45-137 123l-6 27h220 220v58c0 125-48 239-122 293-78 56-2e2 74-299 43zm178-150c29-18 49-51 58-91l7-33h-126-126v25c0 94 108 151 187 99z"/><path d="M6241 2406c-24-8-61-29-82-46l-39-31v36 35h-90-90v-335-335h94 95l3 223c4 258 8 275 84 309 54 23 91 18 125-18 24-25 24-28 27-270l3-244h95 95l-3 268c-3 257-4 269-26 315-33 65-90 99-180 103-40 2-84-2-111-10z"/><path d="M7292 2405c-81-23-130-67-157-144-11-31-11-41-2-41 7 0 45-6 85-14l73-14 15 30c20 40 73 61 129 52 50-7 72-27 81-71 7-35 18-30-156-69-202-46-250-89-250-221 0-42 6-67 25-99 63-107 255-127 371-39l32 24 6-34 7-35h96c87 0 94 2 88 18-30 71-35 115-35 296-1 264-11 298-104 345-62 31-221 39-304 16zm225-416c-4-49-11-67-33-90-69-72-173-58-190 27-10 53 23 74 181 112 22 6 42 10 44 11s1-26-2-60z"/><path d="M8836 2404c-167-53-255-209-226-397 19-127 75-206 180-256 48-23 67-26 160-26 91 0 112 3 155 24 59 30 126 94 154 149 70 138 39 341-68 434-87 77-242 108-355 72zm161-145c102-38 146-212 80-311-87-128-244-90-277 67s75 290 197 244z"/><path d="M9715 2404c-22-8-57-28-77-45l-38-30v36 35h-90-90v-335-335h94 95l3 223c3 257 8 275 83 308 52 23 94 17 127-18 23-24 23-29 26-269l3-244h95 96l-4 268c-3 264-3 268-28 317-20 38-37 55-75 74-60 31-160 38-220 15z"/><path d="M3312 2138c4-292 8-309 71-365 48-42 97-56 176-51 71 5 120 25 164 66l27 26v-42-42h90 90v335 335h-94-95l-3-223c-3-193-5-227-21-250-24-36-59-58-105-64-33-4-44-1-73 25l-34 30-3 241-3 241h-95-96l4-262z"/><path d="M8290 2065v-335h90 90v335 335h-90-90v-335z"/></g></svg></a></div><script>window.index_js_url="/searchindex.en.js"</script><search><form action=/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search><script>var contentLangs=["en"]</script><script src=/js/auto-complete.js defer></script><script src=/js/lunr/lunr.min.js defer></script><script src=/js/lunr/lunr.stemmer.support.min.js defer></script><script src=/js/lunr/lunr.multi.min.js defer></script><script src=/js/lunr/lunr.en.min.js defer></script><script src=/js/search.js defer></script></div><div id=R-homelinks class="default-animation homelinks"><ul><li><a class=padding href=/index.html><i class='fas fa-home'></i> Home</a></li></ul><hr class=padding></div><div id=R-content-wrapper class=highlightable><div id=R-shortcutmenu-home class=R-sidebarmenu><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/getting-started/index.html><a class=padding href=/getting-started/index.html>Getting Started</a></li><li data-nav-id=/joining-trisa/index.html><a class=padding href=/joining-trisa/index.html>Joining TRISA</a><ul id=R-subsections-f4415aff61d0d3b92b4fe9375df1003b class=collapsible-menu></ul></li><li class=parent data-nav-id=/envoy/index.html><a class=padding href=/envoy/index.html>TRISA Envoy</a><ul id=R-subsections-37e3aec351bcd85a6ea8b58e3592ef6e class=collapsible-menu><li data-nav-id=/envoy/deploy/index.html><a class=padding href=/envoy/deploy/index.html>Deploying Envoy</a></li><li data-nav-id=/envoy/workflows/index.html><a class=padding href=/envoy/workflows/index.html>Envoy Workflows</a></li><li data-nav-id=/envoy/configuration/index.html><a class=padding href=/envoy/configuration/index.html>Configuration</a></li><li class=active data-nav-id=/envoy/api/index.html><a class=padding href=/envoy/api/index.html>API Guide</a></li><li data-nav-id=/envoy/webhook/index.html><a class=padding href=/envoy/webhook/index.html>Webhook Guide</a></li><li data-nav-id=/envoy/support.end/index.html><a class=padding href=/envoy/support.end/index.html>Envoy Support</a></li><li data-nav-id=/envoy/openapi/index.html><a class=padding href=/envoy/openapi/index.html>API Reference</a></li></ul></li><li data-nav-id=/api/index.html><a class=padding href=/api/index.html>TRISA Protocol and API</a><ul id=R-subsections-944da21c517df0c48dfbef7af28f3093 class=collapsible-menu></ul></li><li data-nav-id=/data/index.html><a class=padding href=/data/index.html>Working with TRISA Data</a><ul id=R-subsections-4caa791091d21d23e63637080226f370 class=collapsible-menu></ul></li><li data-nav-id=/gds/index.html><a class=padding href=/gds/index.html>Global Directory Service</a><ul id=R-subsections-a963069aa96c47bd6033aafd06b6506a class=collapsible-menu></ul></li><li data-nav-id=/testing/index.html><a class=padding href=/testing/index.html>Testing and Deployment</a><ul id=R-subsections-5701246c22a178238adea0dba612ec07 class=collapsible-menu></ul></li><li data-nav-id=/openvasp/index.html><a class=padding href=/openvasp/index.html>OpenVASP/TRP Integration</a><ul id=R-subsections-f49ded5dadfa5db1635b3279703789ed class=collapsible-menu></ul></li><li data-nav-id=/reference/index.html><a class=padding href=/reference/index.html>Reference</a><ul id=R-subsections-66002f201bef818664bb81aa67490c58 class=collapsible-menu></ul></li></ul></div><div id=R-shortcutmenu-shortcuts class=R-sidebarmenu><ul class="space collapsible-menu"><li data-nav-id=https://github.com/trisacrypto/trisa><a class=padding href=https://github.com/trisacrypto/trisa target=_blank><i class='fab fa-fw fa-github'></i> Version v1beta1</a></li><li data-nav-id=https://pkg.go.dev/github.com/trisacrypto/trisa/pkg><a class=padding href=https://pkg.go.dev/github.com/trisacrypto/trisa/pkg target=_blank><i class='fas fa-book'></i> TRISA API Documentation</a></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showLangSwitch showFooter"></div><div id=R-menu-footer><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showLangSwitch showFooter"><div id=R-prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showLangSwitch"><ul><li id=R-select-language-container class="footerLangSwitch showLangSwitch"><div class="padding menu-control"><i class="fa-fw fas fa-language"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-language>Language</label>
<select id=R-select-language onchange="location=this.querySelector(this.value).dataset.url"><option id=R-select-language-en value=#R-select-language-en data-url=/envoy/api/index.html lang=en selected>English</option></select></div><div class=clear></div></div></li><li id=R-select-variant-container class=footerVariantSwitch><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant onchange=window.relearn.changeVariant(this.value)><option id=R-select-variant-blue value=blue selected>Blue</option></select></div><div class=clear></div></div><script>window.relearn.markVariant()</script></li><li class=footerVisitedLinks><div class="padding menu-control"><i class="fa-fw fas fa-history"></i>
<span>&nbsp;</span><div class=control-style><button onclick=clearHistory()>Clear History</button></div><div class=clear></div></div></li></ul></div><div id=R-footer class="footerFooter showFooter"><p><i class="fa fa-code"></i> <a href=https://github.com/trisacrypto/trisa/blob/main/LICENSE>Open Source Licensed</a> by <a href=https://travelrule.io/>TRISA</a></p></div></div></div></aside><script src=/js/clipboard.min.js defer></script><script src=/js/perfect-scrollbar.min.js defer></script><script src=/js/theme.js defer></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-F9T1H8EJJS"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-F9T1H8EJJS")</script></body></html>