<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.110.0"><meta name=description content="Configuring the GDS"><link rel=icon href=/favicon.png type=image/png><title>GDS :: TRISA Documentation</title><link href=/css/nucleus.css?1701274720 rel=stylesheet><link href=/css/fontawesome-all.min.css?1701274720 rel=stylesheet><link href=/css/featherlight.min.css?1701274720 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1701274720 rel=stylesheet><link href=/css/auto-complete.css?1701274720 rel=stylesheet><link href=/css/theme.css?1701274720 rel=stylesheet><link href=/css/theme-blue.css?1701274720 rel=stylesheet><link href=/css/variant.css?1701274720 rel=stylesheet><link href=/css/print.css?1701274720 rel=stylesheet media=print><script src=/js/jquery.min.js?1701274720></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style><link rel=stylesheet href=/css/syntax.css></head><body data-url=/gds/admin/configuration/gds/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/ style="color:#3d414d;font-family:novacento sans wide,helvetica,tahoma,geneva,arial,sans-serif;font-size:30px;font-weight:700;margin-top:-2px"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="110pt" height="100pt" viewBox="0 0 1116 1022"><g transform="translate(0.000000,1022.000000) scale(0.100000,-0.100000)" fill="#fff" stroke="none"><path d="M5175 8694c-372-40-646-124-955-289-93-50-98-53-185-109-79-52-172-124-270-211l-80-71-45 8c-119 24-255-17-338-1e2-138-139-147-353-21-513 96-123 314-160 462-81 67 36 141 120 166 187 29 76 29 214 1 280l-20 46 53 50c28 27 93 80 142 118 319 239 7e2 388 1106 431 123 13 410 13 524 0 455-52 915-256 1233-547l53-48-20-60c-10-33-22-71-25-85-4-21-24-33-121-74-514-217-929-608-1212-1141l-53-1e2v457 456l48 27c108 62 171 149 192 264 30 169-51 336-199 408-51 25-66 28-166 28-106 0-112-1-171-33-75-41-123-89-160-162-27-51-29-63-29-170s2-119 28-168c33-63 101-131 163-163l44-24v-841-841l-40-18c-52-24-145-121-172-182-17-38-21-68-22-148-1-88 2-107 26-157 83-177 275-258 466-196 58 18 77 31 138 92s73 79 87 132c33 119 16 254-44 341-29 42-94 1e2-137 122-12 7-20 16-17 21 3 4 12 46 21 92 24 130 72 290 126 428 43 108 204 408 250 465 4 6 34 44 65 85 242 316 561 565 903 704l64 26 41-39c22-22 67-53 1e2-68 53-25 71-28 160-28 91 0 106 3 158 30 136 68 213 202 205 353-8 147-77 257-2e2 317-61 31-197 45-259 27-35-9-39-8-80 30-24 23-60 55-79 73-29 26-92 75-185 143-5 4-30 20-55 36s-58 38-73 48c-42 29-250 134-305 154-26 10-51 20-57 24-30 20-248 87-363 111-303 65-595 83-867 53z"/><path d="M5901 4195c-67-15-98-31-144-74-84-77-97-212-31-314 45-69 1e2-95 357-168 114-32 150-82 110-150-36-61-165-89-246-55-43 17-84 67-97 117l-11 40-92-7c-51-3-94-8-96-10-8-7 20-111 40-150 66-124 204-185 388-171 213 17 321 115 321 290 0 165-78 239-320 302-175 45-220 73-206 131 20 79 210 94 271 22 14-17 29-44 32-60 5-27 9-29 36-24 16 3 61 6 99 6h70l-7 43c-4 23-14 59-22 80-21 53-104 123-166 142-75 23-209 28-286 10z"/><path d="M3570 4110v-80h135 135v-380-380h1e2 1e2v380 380h135 135v80 80h-370-370v-80z"/><path d="M4420 3731v-461h95 95v190 190h39c107 0 124-14 269-228l103-152h115c62 0 114 2 114 5s-41 69-90 148c-61 95-110 161-151 2e2-47 44-57 57-42 57 34 0 96 30 131 63 126 120 98 339-53 416-49 26-51 26-337 29l-288 4v-461zm5e2 281c25-12 39-28 49-58 13-37 12-44-5-80-10-21-30-44-44-50-14-7-89-15-167-19l-143-7v116 116h138c110 0 144-3 172-18z"/><path d="M5340 3730v-460h95 95v460 460h-95-95v-460z"/><path d="M6792 4138c-11-29-90-233-176-452-86-220-156-404-156-408 0-5 46-7 102-6l103 3 36 1e2 36 1e2h179 178l39-102 40-103h103c57 0 104 3 104 8 0 4-81 211-181 460l-181 452h-103-104l-19-52zm176-328c28-74 53-143 57-152 7-17-2-18-109-18-64 0-116 1-116 3 0 14 112 309 115 305 2-2 26-64 53-138z"/><path d="M9e2 2194v-466l243 4c275 5 316 14 399 88 174 153 186 548 22 730-82 90-163 109-466 110H9e2v-466zm455 277c51-23 91-69 107-124 19-65 16-261-5-323-19-55-56-97-1e2-113-16-6-80-11-143-11h-114v295 295h108c82 0 116-5 147-19z"/><path d="M8290 2575v-85h90 90v85 85h-90-90v-85z"/><path d="M6818 2587l-88-52v-67-68h-40-40v-70-70h39 38l5-212c6-252 13-278 80-308 48-22 140-26 201-9 34 9 37 13 37 47 0 72-11 113-29 108-55-16-69-17-85-1-14 14-16 43-16 196v179h60 60v70 70h-60-60v120c0 66-3 120-7 119-5 0-47-24-95-52z"/><path d="M7958 2587l-88-51v-68-68h-40-40v-70-70h39 39l4-217c3-245 9-268 78-304 40-22 141-26 203-8l39 10-7 72c-4 40-9 74-10 75-2 2-19-1-39-8-26-8-41-8-56 0-19 10-20 19-20 195v185h60 60v70 70h-60-60v120c0 66-3 120-7 120-5-1-47-24-95-53z"/><path d="M2013 2402c-151-54-227-166-227-332 1-206 121-337 320-348 157-9 267 51 334 182 33 64 35 74 35 165-1 82-4 104-26 151-37 79-81 125-156 162-83 41-198 49-280 20zm196-160c61-45 90-128 76-215-10-56-28-89-65-121-61-51-132-47-191 12-91 91-65 289 45 338 39 18 101 11 135-14z"/><path d="M2773 2402c-89-32-143-84-180-173-14-34-18-71-18-164 0-111 2-124 28-177 55-111 153-168 291-168 137 0 220 45 273 148 49 95 48 97-56 114l-89 14-11-36c-15-51-51-81-103-87-94-9-148 64-148 202 0 134 44 195 139 195 46 0 95-35 105-75 4-14 12-25 19-24 27 1 158 27 163 32 10 10-15 73-46 115-44 61-122 95-229 99-65 3-99-1-138-15z"/><path d="M4375 2408c-16-6-48-24-70-40l-40-29-3 31-3 30h-90-89v-335-335h95 95v203c0 111 4 219 9 240 24 102 152 141 191 59 9-18 14-103 18-264l5-238h87 88l4 223c3 189 6 227 21 254 38 70 120 90 163 39 24-27 24-29 24-272v-244h95 95v251c0 287-6 325-60 379-83 83-254 77-338-13l-23-24-37 37c-55 55-158 76-237 48z"/><path d="M5389 2404c-59-18-133-83-164-144s-48-168-39-245c14-127 67-215 158-263 46-25 61-27 161-27s115 2 161 27c70 37 144 128 131 162-3 7-42 18-88 25-78 12-85 12-94-5-26-47-63-74-102-74-68 0-118 45-137 123l-6 27h220 220v58c0 125-48 239-122 293-78 56-2e2 74-299 43zm178-150c29-18 49-51 58-91l7-33h-126-126v25c0 94 108 151 187 99z"/><path d="M6241 2406c-24-8-61-29-82-46l-39-31v36 35h-90-90v-335-335h94 95l3 223c4 258 8 275 84 309 54 23 91 18 125-18 24-25 24-28 27-270l3-244h95 95l-3 268c-3 257-4 269-26 315-33 65-90 99-180 103-40 2-84-2-111-10z"/><path d="M7292 2405c-81-23-130-67-157-144-11-31-11-41-2-41 7 0 45-6 85-14l73-14 15 30c20 40 73 61 129 52 50-7 72-27 81-71 7-35 18-30-156-69-202-46-250-89-250-221 0-42 6-67 25-99 63-107 255-127 371-39l32 24 6-34 7-35h96c87 0 94 2 88 18-30 71-35 115-35 296-1 264-11 298-104 345-62 31-221 39-304 16zm225-416c-4-49-11-67-33-90-69-72-173-58-190 27-10 53 23 74 181 112 22 6 42 10 44 11s1-26-2-60z"/><path d="M8836 2404c-167-53-255-209-226-397 19-127 75-206 180-256 48-23 67-26 160-26 91 0 112 3 155 24 59 30 126 94 154 149 70 138 39 341-68 434-87 77-242 108-355 72zm161-145c102-38 146-212 80-311-87-128-244-90-277 67s75 290 197 244z"/><path d="M9715 2404c-22-8-57-28-77-45l-38-30v36 35h-90-90v-335-335h94 95l3 223c3 257 8 275 83 308 52 23 94 17 127-18 23-24 23-29 26-269l3-244h95 96l-4 268c-3 264-3 268-28 317-20 38-37 55-75 74-60 31-160 38-220 15z"/><path d="M3312 2138c4-292 8-309 71-365 48-42 97-56 176-51 71 5 120 25 164 66l27 26v-42-42h90 90v335 335h-94-95l-3-223c-3-193-5-227-21-250-24-36-59-58-105-64-33-4-44-1-73 25l-34 30-3 241-3 241h-95-96l4-262z"/><path d="M8290 2065v-335h90 90v335 335h-90-90v-335z"/></g></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script src=/js/lunr.min.js?1701274720></script>
<script src=/js/auto-complete.js?1701274720></script>
<script>var index_url="/index.json",root_url="/",baseUri=root_url.replace(/\/$/,"")</script><script src=/js/search.js?1701274720></script></div><div id=homelinks><ul><li><a class=padding href=/><i class='fas fa-home'></i> Home</a></li></ul></div><div class=highlightable><ul class=topics><li data-nav-id=/getting-started/ title="Getting Started" class=dd-item><a href=/getting-started/>Getting Started</a><ul></ul></li><li data-nav-id=/api/ title="TRISA Protocol and API" class=dd-item><a href=/api/>TRISA Protocol and API</a><ul><li data-nav-id=/api/protocol/ title="TRISA Protocol" class=dd-item><a href=/api/protocol/>TRISA Protocol</a></li><li data-nav-id=/api/api/ title="TRISA API" class=dd-item><a href=/api/api/>TRISA API</a></li><li data-nav-id=/api/errors/ title="TRISA Errors and Rejections" class=dd-item><a href=/api/errors/>TRISA Errors and Rejections</a></li></ul></li><li data-nav-id=/joining-trisa/ title="Joining TRISA" class=dd-item><a href=/joining-trisa/>Joining TRISA</a><ul><li data-nav-id=/joining-trisa/registration/ title=Registration class=dd-item><a href=/joining-trisa/registration/>Registration</a></li><li data-nav-id=/joining-trisa/trixo/ title="TRIXO Form" class=dd-item><a href=/joining-trisa/trixo/>TRIXO Form</a></li><li data-nav-id=/joining-trisa/pkcs12/ title="Anatomy of a PKCS12 file" class=dd-item><a href=/joining-trisa/pkcs12/>Anatomy of a PKCS12 file</a></li><li data-nav-id=/joining-trisa/ca/ title="Certificate Authority" class=dd-item><a href=/joining-trisa/ca/>Certificate Authority</a></li><li data-nav-id=/joining-trisa/verification/ title="Domain Verification" class=dd-item><a href=/joining-trisa/verification/>Domain Verification</a></li></ul></li><li data-nav-id=/data/ title="Working with TRISA Data" class=dd-item><a href=/data/>Working with TRISA Data</a><ul><li data-nav-id=/data/ivms/ title="Working with IVMS101" class=dd-item><a href=/data/ivms/>Working with IVMS101</a></li><li data-nav-id=/data/envelopes/ title="Secure Envelopes" class=dd-item><a href=/data/envelopes/>Secure Envelopes</a></li><li data-nav-id=/data/payloads/ title="Data Payloads" class=dd-item><a href=/data/payloads/>Data Payloads</a></li><li data-nav-id=/data/keys/ title="Key Handler Package" class=dd-item><a href=/data/keys/>Key Handler Package</a></li></ul></li><li data-nav-id=/gds/ title="Global Directory Service" class="dd-item parent"><a href=/gds/>Global Directory Service</a><ul><li data-nav-id=/gds/api/ title="Using the GDS API" class=dd-item><a href=/gds/api/>Using the GDS API</a></li><li data-nav-id=/gds/members/ title="Accessing Members" class=dd-item><a href=/gds/members/>Accessing Members</a></li><li data-nav-id=/gds/admin/ title=Administration class="dd-item parent alwaysopen"><a href=/gds/admin/>Administration</a><ul><li data-nav-id=/gds/admin/deployment/ title=Deployment class=dd-item><a href=/gds/admin/deployment/>Deployment</a></li><li data-nav-id=/gds/admin/configuration/ title=Configuration class="dd-item parent alwaysopen"><a href=/gds/admin/configuration/>Configuration</a><ul><li data-nav-id=/gds/admin/configuration/gds/ title=GDS class="dd-item active"><a href=/gds/admin/configuration/gds/>GDS</a></li><li data-nav-id=/gds/admin/configuration/bff/ title=BFF class=dd-item><a href=/gds/admin/configuration/bff/>BFF</a></li><li data-nav-id=/gds/admin/configuration/ui/ title="User Interfaces" class=dd-item><a href=/gds/admin/configuration/ui/>User Interfaces</a></li><li data-nav-id=/gds/admin/configuration/trtl/ title=TrtlDB class=dd-item><a href=/gds/admin/configuration/trtl/>TrtlDB</a></li></ul></li></ul></li></ul></li><li data-nav-id=/testing/ title="Testing and Deployment" class=dd-item><a href=/testing/>Testing and Deployment</a><ul><li data-nav-id=/testing/rvasps/ title="Robot VASPs" class=dd-item><a href=/testing/rvasps/>Robot VASPs</a></li><li data-nav-id=/testing/trisa-cli/ title="TRISA CLI" class=dd-item><a href=/testing/trisa-cli/>TRISA CLI</a></li><li data-nav-id=/testing/certs-cli/ title="Creating Test Certificates" class=dd-item><a href=/testing/certs-cli/>Creating Test Certificates</a></li></ul></li><li data-nav-id=/openvasp/ title="OpenVASP/TRP Integration" class=dd-item><a href=/openvasp/>OpenVASP/TRP Integration</a><ul><li data-nav-id=/openvasp/bridge/ title="TRP Bridge" class=dd-item><a href=/openvasp/bridge/>TRP Bridge</a></li><li data-nav-id=/openvasp/client/ title="TRP Client" class=dd-item><a href=/openvasp/client/>TRP Client</a></li></ul></li><li data-nav-id=/reference/ title=Reference class=dd-item><a href=/reference/>Reference</a><ul><li data-nav-id=/reference/best-practices/ title="Best Practices" class=dd-item><a href=/reference/best-practices/>Best Practices</a></li><li data-nav-id=/reference/faq/ title=FAQ class=dd-item><a href=/reference/faq/>FAQ</a></li><li data-nav-id=/reference/glossary/ title=Glossary class=dd-item><a href=/reference/glossary/>Glossary</a></li><li data-nav-id=/reference/how-to-contribute/ title="How to Contribute" class=dd-item><a href=/reference/how-to-contribute/>How to Contribute</a></li><li data-nav-id=/reference/license/ title=License class=dd-item><a href=/reference/license/>License</a></li></ul></li></ul><div id=shortcuts><div class=nav-title></div><ul><li><a class=padding href=https://github.com/trisacrypto/trisa><i class='fab fa-fw fa-github'></i> Version v1beta1</a></li><li><a class=padding href=https://pkg.go.dev/github.com/trisacrypto/trisa/pkg><i class='fas fa-book'></i> TRISA API Documentation</a></li></ul></div><div id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://trisa.dev/gds/admin/configuration/gds/ selected>English</option></select><svg id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li></ul></div><div id=footer><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></nav><div id=body><div id=overlay></div><div class="padding highlightable"><div id=top-bar><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="5"><a itemprop=item href=/><span itemprop=name>Home</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="4"><a itemprop=item href=/gds/><span itemprop=name>Global Directory Service</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3"><a itemprop=item href=/gds/admin/><span itemprop=name>Administration</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="2"><a itemprop=item href=/gds/admin/configuration/><span itemprop=name>Configuration</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="1"><a itemprop=item href=/gds/admin/configuration/gds/ aria-disabled=true><span itemprop=name>GDS</span></a></li></ol></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#gds-api>GDS API</a></li><li><a href=#admin-api>Admin API</a></li><li><a href=#members-api>Members API</a></li><li><a href=#database>Database</a></li><li><a href=#email-and-sendgrid>Email and SendGrid</a></li><li><a href=#certman>CertMan</a></li><li><a href=#backups>Backups</a></li><li><a href=#google-secrets>Google Secrets</a></li><li><a href=#sentry>Sentry</a></li></ul></li></ul></nav></div></div></div><div id=head-tags></div><main id=body-inner><h1>GDS</h1><p>The GDS is a collection of three APIs and several background services backed by a global TrtlDB data store. A single GDS node implements the TRISA Directory gRPC API, the secure TRISA Members gRPC API, and the Admin REST API that powers the Admin UI. It also runs the CertMan process that issues and collects certificates from Sectigo. Its environment variables are all prefixed with the <code>GDS_</code> tag. The primary configuration is as follows:</p><table><thead><tr><th>EnvVar</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>GDS_DIRECTORY_ID</td><td>string</td><td>vaspdirectory.net</td><td>The network ID the GDS serves, either vaspdirectory.net or trisatest.net (or .dev).</td></tr><tr><td>GDS_SECRET_KEY</td><td>string</td><td></td><td>A base64 encoded random 32 byte array that is used for salts and random seeds - required.</td></tr><tr><td>GDS_MAINTENANCE</td><td>bool</td><td>false</td><td>Sets the server to maintenance mode, which will respond to requests with Unavailable except for status requests.</td></tr><tr><td>GDS_LOG_LEVEL</td><td>string</td><td>info</td><td>The verbosity of logging, one of trace, debug, info, warn, error, fatal, or panic.</td></tr><tr><td>GDS_CONSOLE_LOG</td><td>bool</td><td>false</td><td>If true will print human readable logs instead of JSON logs for machine consumption.</td></tr></tbody></table><h3 id=gds-api>GDS API</h3><p>The primary GDS API (the gRPC TRISA Directory service) is configured as follows:</p><table><thead><tr><th>EnvVar</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>GDS_API_ENABLED</td><td>bool</td><td>true</td><td>If false, disables the TRISA Directory service.</td></tr><tr><td>GDS_BIND_ADDR</td><td>string</td><td>:4433</td><td>The IP address and port to bind the GDS gRPC server to.</td></tr></tbody></table><p>Note that the enabled flag is only respected if <code>GDS_MAINTENANCE</code> is <code>false</code>, otherwise maintenance mode supersedes service enabled flags.</p><h3 id=admin-api>Admin API</h3><p>The Admin API (a REST API that powers the Admin UI) is configured as follows:</p><table><thead><tr><th>EnvVar</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>GDS_ADMIN_ENABLED</td><td>bool</td><td>true</td><td>If false, disables the Admin API service.</td></tr><tr><td>GDS_ADMIN_BIND_ADDR</td><td>string</td><td>:4434</td><td>The IP address and port to bind the Admin API http server to.</td></tr><tr><td>GDS_ADMIN_MODE</td><td>string</td><td>release</td><td>Sets the Gin mode, one of debug, release, or test.</td></tr><tr><td>GDS_ADMIN_ALLOW_ORIGINS</td><td>[]string</td><td>http://localhost,http://localhost:3000</td><td>A list of allowed origins for the CORS middleware to accept.</td></tr><tr><td>GDS_ADMIN_COOKIE_DOMAIN</td><td>string</td><td></td><td>The domain to set secure cookies for (particularly for CSRF and authentication).</td></tr><tr><td>GDS_ADMIN_AUDIENCE</td><td>string</td><td></td><td>The audience to set and verify in JWT tokens issued by the Admin API.</td></tr><tr><td>GDS_ADMIN_OAUTH_GOOGLE_AUDIENCE</td><td>string</td><td></td><td>The audience from the Google OAuth config to verify Google login tokens.</td></tr><tr><td>GDS_ADMIN_OAUTH_AUTHORIZED_EMAIL_DOMAINS</td><td>[]string</td><td></td><td>The list of authorized email domains to allow access to the admin UI (e.g. trisa.io).</td></tr><tr><td>GDS_ADMIN_TOKEN_KEYS</td><td>map[string]string</td><td></td><td>A mapping of key id (ksuid/ulid) to the path to an RSA signing key in PEM format for JWT token signing.</td></tr></tbody></table><p>Note that the enabled flag is only respected if <code>GDS_MAINTENANCE</code> is <code>false</code>, otherwise maintenance mode supersedes service enabled flags.</p><h3 id=members-api>Members API</h3><p>The Members API is a gRPC API that is secured by TRISA, verified by mTLS, and is configured as follows:</p><table><thead><tr><th>EnvVar</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>GDS_MEMBERS_ENABLED</td><td>bool</td><td>true</td><td>If false, disables the Members API service.</td></tr><tr><td>GDS_MEMBERS_BIND_ADDR</td><td>string</td><td>:4435</td><td>The IP address and port to bind the Members gRPC server to.</td></tr><tr><td>GDS_MEMBERS_INSECURE</td><td>bool</td><td>false</td><td>If set do not enable mTLS authentication.</td></tr><tr><td>GDS_MEMBERS_CERTS</td><td>string</td><td></td><td>The path to the mTLS server-side certs for server auth.</td></tr><tr><td>GDS_MEMBERS_CERT_POOL</td><td>string</td><td></td><td>The path to the mTLS public cert pools to accept incoming connections.</td></tr></tbody></table><p>Note that the enabled flag is only respected if <code>GDS_MAINTENANCE</code> is <code>false</code>, otherwise maintenance mode supersedes service enabled flags. If <code>GDS_MEMBERS_INSECURE</code> is <code>false</code>, then <code>GDS_MEMBERS_CERTS</code> and <code>GDS_MEMBERS_CERT_POOL</code> are required.</p><h3 id=database>Database</h3><p>The GDS makes use of a globally replicated key-value store for persistence. By default it uses the TrtlDB for this, but for testing or smaller deployments it can use a local LevelDB database instead. The database store is configured as follows:</p><table><thead><tr><th>EnvVar</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>GDS_DATABASE_URL</td><td>string</td><td></td><td>Required, the DSN to connect to the database on (see below for details).</td></tr><tr><td>GDS_DATABASE_REINDEX_ON_BOOT</td><td>bool</td><td>false</td><td>When the server starts, instead of loading indexes from disk, recreate and save them.</td></tr><tr><td>GDS_DATABASE_INSECURE</td><td>bool</td><td>false</td><td>If set do not connect to the TrtlDB with mTLS authentication.</td></tr><tr><td>GDS_DATABASE_CERT_PATH</td><td>string</td><td></td><td>The path to the mTLS client-side certs for database auth.</td></tr><tr><td>GDS_DATABASE_POOL_PATH</td><td>string</td><td></td><td>The path to the mTLS public cert pools to accept server connections.</td></tr></tbody></table><p>The <code>GDS_DATABASE_URL</code> is a standard DSN with a scheme, host, path, and query parameters. In the case of the GDS the scheme can be either <code>trtl://</code> or <code>leveldb://</code>.</p><p>When connecting to a TrtlDB, the host and port need to be specified with a trailing slash, e.g. <code>trtl://localhost:4436/</code>. Connecting via mTLS is only relevant when connecting to a TrtlDB. If <code>GDS_DATABASE_INSECURE</code> is <code>false</code>, then the <code>GDS_DATABASE_CERT_PATH</code> and <code>GDS_DATABASE_POOL_PATH</code> are required.</p><p>When connecting to a LevelDB, the path to the directory on disk where the leveldb should be stored must be passed to the DSN. To specify a relative path, use three slashes: <code>leveldb:///relpath/to/db</code>, to specify an absolute path use four: <code>leveldb:////abspath/to/db</code>.</p><h3 id=email-and-sendgrid>Email and SendGrid</h3><p>The GDS uses <a href=https://sendgrid.com/>SendGrid</a> to send email notifications and to enable communication workflows with users and admins. Configure GDS to use SendGrid as follows:</p><table><thead><tr><th>EnvVar</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>GDS_SERVICE_EMAIL</td><td>string</td><td>TRISA Directory Service <a href=mailto:admin@vaspdirectory.net>admin@vaspdirectory.net</a></td><td>The email address used as the sender for all emails from the GDS system.</td></tr><tr><td>GDS_ADMIN_EMAIL</td><td>string</td><td>TRISA Admins <a href=mailto:admin@trisa.io>admin@trisa.io</a></td><td>The email address to send admin emails to from the server.</td></tr><tr><td>SENDGRID_API_KEY</td><td>string</td><td></td><td>API Key to authenticate to SendGrid with.</td></tr><tr><td>GDS_DIRECTORY_ID</td><td>string</td><td>vaspdirectory.net</td><td>(Reused) The network ID the GDS serves, either vaspdirectory.net or trisatest.net (or .dev).</td></tr><tr><td>GDS_VERIFY_CONTACT_URL</td><td>string</td><td><a href=https://vaspdirectory.net/verify>https://vaspdirectory.net/verify</a></td><td>The base URL to include in emails for contact verification.</td></tr><tr><td>GDS_ADMIN_REVIEW_URL</td><td>string</td><td><a href=https://admin.vaspdirectory.net/vasps/>https://admin.vaspdirectory.net/vasps/</a></td><td>The base URL to include in emails to link to a new VASP registration.</td></tr><tr><td>GDS_EMAIL_TESTING</td><td>bool</td><td>false</td><td>Use email in testing mode rather than send live emails.</td></tr><tr><td>GDS_EMAIL_STORAGE</td><td>string</td><td>""</td><td>Directory to store test emails for &ldquo;mark one eyeball&rdquo; review.</td></tr></tbody></table><p>SendGrid is considered <strong>enabled</strong> if the SendGrid API Key is set. The service and admin email addresses are required if SendGrid is enabled.</p><h3 id=certman>CertMan</h3><p>The CertMan is a background process that runs on the GDS and manages certificate requests, interacts with Sectigo, and finalizes the VASP registration process. It is configured as follows:</p><table><thead><tr><th>EnvVar</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>GDS_CERTMAN_ENABLED</td><td>bool</td><td>true</td><td>If false, disables the CertMan background process.</td></tr><tr><td>GDS_CERTMAN_REQUEST_INTERVAL</td><td>duration</td><td>10m</td><td>The interval between certificate request processing runs.</td></tr><tr><td>GDS_CERTMAN_REISSUANCE_INTERVAL</td><td>duration</td><td>24h</td><td>The interval between certificate reissuance processing runs.</td></tr><tr><td>GDS_CERTMAN_STORAGE</td><td>string</td><td></td><td>The path to a directory on disk where CertMan temporarily downloads certificates (otherwise a tmp dir is used).</td></tr><tr><td>GDS_DIRECTORY_ID</td><td>string</td><td>vaspdirectory.net</td><td>(Reused) The network ID the GDS serves, either vaspdirectory.net or trisatest.net (or .dev).</td></tr><tr><td>SECTIGO_USERNAME</td><td>string</td><td></td><td>The username to authenticate with the Sectigo API.</td></tr><tr><td>SECTIGO_PASSWORD</td><td>string</td><td></td><td>The password to authenticate with the Sectigo API.</td></tr><tr><td>SECTIGO_PROFILE</td><td>string</td><td></td><td>The certificate profile to use (see below for details).</td></tr><tr><td>SECTIGO_ENDPOINT</td><td>string</td><td></td><td>The endpoint to connect to Sectigo on (leave blank for production).</td></tr><tr><td>SECTIGO_TESTING</td><td>bool</td><td></td><td>If Sectigo is in testing mode it will not make actual Sectigo requests.</td></tr></tbody></table><p>Note that CertMan also needs valid email (SendGrid) and Google Secrets configurations if it is enabled.</p><p>The Sectigo username, password, and profile are required if the Sectigo config is not in testing mode. The profile must be a valid certificate profile, which can be either &ldquo;CipherTrace EE&rdquo; for the TestNet or &ldquo;CipherTrace End Entity Certificate&rdquo; for the MainNet. These profiles determine what parameters must be sent to Sectigo to make certificate requests, and what is populated on the certificate (including what intermediate authority is used) when it is generated.</p><p>Do not set the <code>SECTIGO_ENDPOINT</code> unless you&rsquo;re in testing, development, or staging mode and are pointing it to a local cathy server.</p><h3 id=backups>Backups</h3><p>The Backup manager is only available when the GDS is using the LevelDB database store. It is a background process that clones the database into a zipped folder on disk that can be downloaded for backup purposes.</p><table><thead><tr><th>EnvVar</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>GDS_BACKUP_ENABLED</td><td>bool</td><td>false</td><td>If true, enables the backup background process.</td></tr><tr><td>GDS_BACKUP_INTERVAL</td><td>duration</td><td>24h</td><td>The interval between database backups.</td></tr><tr><td>GDS_BACKUP_STORAGE</td><td>string</td><td></td><td>The path on disk to store database backups (required if enabled).</td></tr><tr><td>GDS_BACKUP_KEEP</td><td>int</td><td>1</td><td>The number of backups to keep before cleaning up old backups.</td></tr></tbody></table><p>Backups should not be enabled when using the TrtlDB database store! If the backups are enabled then the storage path is required.</p><h3 id=google-secrets>Google Secrets</h3><p>GDS uses Google Secret Manager to store certificates and PKCS12 passwords and other sensitive information to ensure that it is encrypted and secure. Access to Google Secret Manager is configured as follows:</p><table><thead><tr><th>EnvVar</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>GOOGLE_APPLICATION_CREDENTIALS</td><td>string</td><td></td><td>Path to the JSON credentials for the Google Service Account that has access to Google Secret Manager.</td></tr><tr><td>GOOGLE_PROJECT_NAME</td><td>string</td><td></td><td>Name of the Google Project for API access to Google Secret Manager.</td></tr><tr><td>GDS_SECRETS_TESTING</td><td>bool</td><td>false</td><td>If set to true, uses a local in-memory &ldquo;secret store&rdquo; for testing and development.</td></tr></tbody></table><p>Note that the <code>GOOGLE_APPLICATION_CREDENTIALS</code> and <code>GOOGLE_PROJECT_NAME</code> are required if <code>GDS_SECRETS_TESTING</code> is <code>false</code>.</p><h3 id=sentry>Sentry</h3><p>The GDS uses <a href=https://sentry.io/>Sentry</a> to assist with error monitoring and performance tracing. Configure GDS to use Sentry as follows:</p><table><thead><tr><th>EnvVar</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>GDS_SENTRY_DSN</td><td>string</td><td></td><td>The DSN for the Sentry project. If not set then Sentry is considered disabled.</td></tr><tr><td>GDS_SENTRY_SERVER_NAME</td><td>string</td><td></td><td>Optional - a server name to tag Sentry events with.</td></tr><tr><td>GDS_SENTRY_ENVIRONMENT</td><td>string</td><td></td><td>The environment to report (e.g. development, staging, production). Required if Sentry is enabled.</td></tr><tr><td>GDS_SENTRY_RELEASE</td><td>string</td><td>{{version}}</td><td>Specify the release version for Sentry tracking. By default this will be the package version.</td></tr><tr><td>GDS_SENTRY_TRACK_PERFORMANCE</td><td>bool</td><td>false</td><td>Enable performance tracing to Sentry with the specified sample rate.</td></tr><tr><td>GDS_SENTRY_SAMPLE_RATE</td><td>float64</td><td>0.85</td><td>The percentage of transactions to trace (0.0 to 1.0).</td></tr><tr><td>GDS_SENTRY_REPORT_ERRORS</td><td>bool</td><td>false</td><td>If true sends gRPC errors to Sentry as exceptions (useful for development or staging)</td></tr><tr><td>GDS_SENTRY_DEBUG</td><td>bool</td><td>false</td><td>Set Sentry to debug mode for testing.</td></tr></tbody></table><p>Sentry is considered <strong>enabled</strong> if a DSN is configured. Performance tracing is only enabled if Sentry is enabled <em>and</em> track performance is set to true. If Sentry is enabled, an environment is required, otherwise the configuration will be invalid.</p><p>Note that the <code>sentry.Config</code> object has a field <code>Repanic</code> that should not be set by the user. This field is used to manage panics in chained interceptors.</p><footer class=footline></footer></main></div><div id=navigation><a class="nav nav-prev" href=/gds/admin/configuration/ title=Configuration><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/gds/admin/configuration/bff/ title=BFF><i class="fa fa-chevron-right"></i></a></div></div><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1701274720></script>
<script src=/js/perfect-scrollbar.min.js?1701274720></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1701274720></script>
<script src=/js/jquery.svg.pan.zoom.js?1701274720></script>
<script src=/js/featherlight.min.js?1701274720></script>
<script src=/js/modernizr.custom-3.6.0.js?1701274720></script>
<script src=/js/mermaid.min.js?1701274720></script>
<script>typeof mermaid!="undefined"&&mermaid.mermaidAPI.initialize(Object.assign({securityLevel:"antiscript"},JSON.parse('{ "startOnLoad": true }'),{startOnLoad:!1}))</script><script src=/js/relearn.js?1701274720></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-F9T1H8EJJS"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-F9T1H8EJJS")</script></body></html>